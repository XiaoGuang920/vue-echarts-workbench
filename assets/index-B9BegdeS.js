import{bO as _e,ay as se,aM as oe,b2 as ee,be as J,cz as Ce,cv as Ie,Y as le,bE as De,al as q,b5 as Q,cA as Oe,c2 as j,cB as Ye,b7 as Ee,cC as Re,S as Ae,cD as Be,aQ as Ge,cr as We,ae as Z,bG as ve,ac as V,ch as ze,a8 as Le,cE as Ue,cF as ue,cG as Ve,cH as Xe,cI as Ne,bf as be,cJ as He,a1 as Fe,cK as ke,ao as de,cL as qe,aG as ce,aO as fe,cM as je,cN as he,a9 as ge,bp as Ke}from"./index-Cem_aaF4.js";import{s as $e,g as Je,u as ye,c as Qe}from"./labelGuideHelper-CWC9nN2c.js";function Ze(t,e){return e=e||{},_e(t,null,null,e.state!=="normal")}function et(t){var e=se.extend(t);return se.registerClass(e),e}function tt(t){var e=oe.extend(t);return oe.registerClass(e),e}function at(t){if(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].slice());return e}}function rt(t,e){var a=t.label,r=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:a.style.align,verticalAlign:a.style.verticalAlign,labelLinePoints:at(r&&r.shape.points)}}var pe=["align","verticalAlign","width","height","fontSize"],M=new Ce,K=ee(),it=ee();function N(t,e,a){for(var r=0;r<a.length;r++){var i=a[r];e[i]!=null&&(t[i]=e[i])}}var H=["x","y","rotation"],nt=(function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(e,a,r,i,l){var n=i.style,v=i.__hostTarget,s=v.textConfig||{},f=i.getComputedTransform(),u=i.getBoundingRect().plain();J.applyTransform(u,u,f),f?M.setLocalTransform(f):(M.x=M.y=M.rotation=M.originX=M.originY=0,M.scaleX=M.scaleY=1),M.rotation=Ie(M.rotation);var w=i.__hostTarget,m;if(w){m=w.getBoundingRect().plain();var T=w.getComputedTransform();J.applyTransform(m,m,T)}var I=m&&w.getTextGuideLine();this._labelList.push({label:i,labelLine:I,seriesModel:r,dataIndex:e,dataType:a,layoutOption:l,computedLayoutOption:null,rect:u,hostRect:m,priority:m?m.width*m.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:I&&I.ignore,x:M.x,y:M.y,scaleX:M.scaleX,scaleY:M.scaleY,rotation:M.rotation,style:{x:n.x,y:n.y,align:n.align,verticalAlign:n.verticalAlign,width:n.width,height:n.height,fontSize:n.fontSize},cursor:i.cursor,attachedPos:s.position,attachedRot:s.rotation}})},t.prototype.addLabelsOfSeries=function(e){var a=this;this._chartViewList.push(e);var r=e.__model,i=r.get("labelLayout");(le(i)||De(i).length)&&e.group.traverse(function(l){if(l.ignore)return!0;var n=l.getTextContent(),v=q(l);n&&!n.disableLabelLayout&&a._addLabel(v.dataIndex,v.dataType,r,n,i)})},t.prototype.updateLayoutConfig=function(e){var a=e.getWidth(),r=e.getHeight();function i(B,C){return function(){ye(B,C)}}for(var l=0;l<this._labelList.length;l++){var n=this._labelList[l],v=n.label,s=v.__hostTarget,f=n.defaultAttr,u=void 0;le(n.layoutOption)?u=n.layoutOption(rt(n,s)):u=n.layoutOption,u=u||{},n.computedLayoutOption=u;var w=Math.PI/180;s&&s.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:f.attachedPos,rotation:u.rotate!=null?u.rotate*w:f.attachedRot,offset:[u.dx||0,u.dy||0]});var m=!1;if(u.x!=null?(v.x=Q(u.x,a),v.setStyle("x",0),m=!0):(v.x=f.x,v.setStyle("x",f.style.x)),u.y!=null?(v.y=Q(u.y,r),v.setStyle("y",0),m=!0):(v.y=f.y,v.setStyle("y",f.style.y)),u.labelLinePoints){var T=s.getTextGuideLine();T&&(T.setShape({points:u.labelLinePoints}),m=!1)}var I=K(v);I.needsUpdateLabelLine=m,v.rotation=u.rotate!=null?u.rotate*w:f.rotation,v.scaleX=f.scaleX,v.scaleY=f.scaleY;for(var x=0;x<pe.length;x++){var _=pe[x];v.setStyle(_,u[_]!=null?u[_]:f.style[_])}if(u.draggable){if(v.draggable=!0,v.cursor="move",s){var E=n.seriesModel;if(n.dataIndex!=null){var A=n.seriesModel.getData(n.dataType);E=A.getItemModel(n.dataIndex)}v.on("drag",i(s,E.getModel("labelLine")))}}else v.off("drag"),v.cursor=f.cursor}},t.prototype.layout=function(e){var a=e.getWidth(),r=e.getHeight(),i=Oe(this._labelList),l=j(i,function(s){return s.layoutOption.moveOverlap==="shiftX"}),n=j(i,function(s){return s.layoutOption.moveOverlap==="shiftY"});Ye(l,0,a),Ee(n,0,r);var v=j(i,function(s){return s.layoutOption.hideOverlap});Re(v)},t.prototype.processLabelsOverall=function(){var e=this;Ae(this._chartViewList,function(a){var r=a.__model,i=a.ignoreLabelLineUpdate,l=r.isAnimationEnabled();a.group.traverse(function(n){if(n.ignore&&!n.forceLabelAnimation)return!0;var v=!i,s=n.getTextContent();!v&&s&&(v=K(s).needsUpdateLabelLine),v&&e._updateLabelLine(n,r),l&&e._animateLabels(n,r)})})},t.prototype._updateLabelLine=function(e,a){var r=e.getTextContent(),i=q(e),l=i.dataIndex;if(r&&l!=null){var n=a.getData(i.dataType),v=n.getItemModel(l),s={},f=n.getItemVisual(l,"style");if(f){var u=n.getVisual("drawType");s.stroke=f[u]}var w=v.getModel("labelLine");$e(e,Je(v),s),ye(e,w)}},t.prototype._animateLabels=function(e,a){var r=e.getTextContent(),i=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!Be(e))){var l=K(r),n=l.oldLayout,v=q(e),s=v.dataIndex,f={x:r.x,y:r.y,rotation:r.rotation},u=a.getData(v.dataType);if(n){r.attr(n);var m=e.prevStates;m&&(ve(m,"select")>=0&&r.attr(l.oldLayoutSelect),ve(m,"emphasis")>=0&&r.attr(l.oldLayoutEmphasis)),V(r,f,a,s)}else if(r.attr(f),!Ge(r).valueAnimation){var w=We(r.style.opacity,1);r.style.opacity=0,Z(r,{style:{opacity:w}},a,s)}if(l.oldLayout=f,r.states.select){var T=l.oldLayoutSelect={};N(T,f,H),N(T,r.states.select,H)}if(r.states.emphasis){var I=l.oldLayoutEmphasis={};N(I,f,H),N(I,r.states.emphasis,H)}ze(r,s,u,a,a)}if(i&&!i.ignore&&!i.invisible){var l=it(i),n=l.oldLayout,x={points:i.shape.points};n?(i.attr({shape:n}),V(i,{shape:x},a)):(i.setShape(x),i.style.strokePercent=0,Z(i,{style:{strokePercent:1}},a)),l.oldLayout=x}},t})(),$=ee();function st(t){t.registerUpdateLifecycle("series:beforeupdate",function(e,a,r){var i=$(a).labelManager;i||(i=$(a).labelManager=new nt),i.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(e,a,r){var i=$(a).labelManager;r.updatedSeries.forEach(function(l){i.addLabelsOfSeries(a.getViewOfSeriesModel(l))}),i.updateLayoutConfig(a),i.layout(a),i.processLabelsOverall()})}var ot=(function(t){Le(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataset",a}return e.prototype.init=function(a,r,i){t.prototype.init.call(this,a,r,i),this._sourceManager=new Ue(this),ue(this)},e.prototype.mergeOption=function(a,r){t.prototype.mergeOption.call(this,a,r),ue(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Ve},e})(Xe),lt=(function(t){Le(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataset",a}return e.type="dataset",e})(Ne);function vt(t){t.registerComponentModel(ot),t.registerComponentView(lt)}be([He,vt]);be(st);et({type:"series.liquidFill",optionUpdated:function(){var t=this.option;t.gridSize=Math.max(Math.floor(t.gridSize),4)},getInitialData:function(t,e){var a=Qe(t.data,{coordDimensions:["value"]}),r=new Fe(a,this);return r.initData(t.data),r},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}});const ut=ke({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(t,e){e.radiusY==null&&(e.radiusY=e.radius);for(var a=Math.max(Math.ceil(2*e.radius/e.waveLength*4)*2,8);e.phase<-Math.PI*2;)e.phase+=Math.PI*2;for(;e.phase>0;)e.phase-=Math.PI*2;var r=e.phase/Math.PI/2*e.waveLength,i=e.cx-e.radius+r-e.radius*2;t.moveTo(i,e.waterLevel);for(var l=0,n=0;n<a;++n){var v=n%4,s=dt(n*e.waveLength/4,v,e.waveLength,e.amplitude);t.bezierCurveTo(s[0][0]+i,-s[0][1]+e.waterLevel,s[1][0]+i,-s[1][1]+e.waterLevel,s[2][0]+i,-s[2][1]+e.waterLevel),n===a-1&&(l=s[2][0])}e.inverse?(t.lineTo(l+i,e.cy-e.radiusY),t.lineTo(i,e.cy-e.radiusY),t.lineTo(i,e.waterLevel)):(t.lineTo(l+i,e.cy+e.radiusY),t.lineTo(i,e.cy+e.radiusY),t.lineTo(i,e.waterLevel)),t.closePath()}});function dt(t,e,a,r){return e===0?[[t+1/2*a/Math.PI/2,r/2],[t+1/2*a/Math.PI,r],[t+a/4,r]]:e===1?[[t+1/2*a/Math.PI/2*(Math.PI-2),r],[t+1/2*a/Math.PI/2*(Math.PI-1),r/2],[t+a/4,0]]:e===2?[[t+1/2*a/Math.PI/2,-r/2],[t+1/2*a/Math.PI,-r],[t+a/4,-r]]:[[t+1/2*a/Math.PI/2*(Math.PI-2),-r],[t+1/2*a/Math.PI/2*(Math.PI-1),-r/2],[t+a/4,0]]}var R=Q;function me(t){return t&&t.indexOf("path://")===0}tt({type:"liquidFill",render:function(t,e,a){var r=this,i=this.group;i.removeAll();var l=t.getData(),n=l.getItemModel(0),v=n.get("center"),s=n.get("radius"),f=a.getWidth(),u=a.getHeight(),w=Math.min(f,u),m=0,T=0,I=t.get("outline.show");I&&(m=t.get("outline.borderDistance"),T=R(t.get("outline.itemStyle.borderWidth"),w));var x=R(v[0],f),_=R(v[1],u),E,A,B,C=!1,D=t.get("shape");if(D==="container"?(C=!0,E=[f/2,u/2],A=[E[0]-T/2,E[1]-T/2],B=[R(m,f),R(m,u)],s=[Math.max(A[0]-B[0],0),Math.max(A[1]-B[1],0)]):(E=R(s,w)/2,A=E-T/2,B=R(m,w),s=Math.max(A-B,0)),I){var we=te();we.style.lineWidth=T,i.add(te())}var xe=C?0:x-s,Me=C?0:_-s,G=null;i.add(Se());var F=this._data,k=[];l.diff(F).add(function(o){var d=ae(o,!1),c=d.shape.waterLevel;d.shape.waterLevel=C?u/2:s,Z(d,{shape:{waterLevel:c}},t),d.z2=2,re(o,d,null),i.add(d),l.setItemGraphicEl(o,d),k.push(d)}).update(function(o,d){for(var c=F.getItemGraphicEl(d),y=ae(o,!1,c),g={},h=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],L=0;L<h.length;++L){var p=h[L];y.shape.hasOwnProperty(p)&&(g[p]=y.shape[p])}for(var S={},b=["fill","opacity","shadowBlur","shadowColor"],L=0;L<b.length;++L){var p=b[L];y.style.hasOwnProperty(p)&&(S[p]=y.style[p])}C&&(g.radiusY=u/2),V(c,{shape:g,x:y.x,y:y.y},t),t.isUniversalTransitionEnabled&&t.isUniversalTransitionEnabled()?V(c,{style:S},t):c.useStyle(S);var P=c.getClipPath(),O=y.getClipPath();c.setClipPath(y.getClipPath()),c.shape.inverse=y.inverse,P&&O&&r._shape===D&&!me(D)&&V(O,{shape:P.shape},t,{isFrom:!0}),re(o,c,c),i.add(c),l.setItemGraphicEl(o,c),k.push(c)}).remove(function(o){var d=F.getItemGraphicEl(o);i.remove(d)}).execute(),n.get("label.show")&&i.add(Pe(k)),this._shape=D,this._data=l;function W(o,d){if(D)if(me(D)){var c=he(D.slice(7),{}),y=c.getBoundingRect(),g=y.width,h=y.height;g>h?(h=o*2/g*h,g=o*2):(g=o*2/h*g,h=o*2);var L=d?0:x-g/2,p=d?0:_-h/2;return c=he(D.slice(7),{},new J(L,p,g,h)),d&&(c.x=-g/2,c.y=-h/2),c}else if(C){var S=d?-o[0]:x-o[0],b=d?-o[1]:_-o[1];return ge("rect",S,b,o[0]*2,o[1]*2)}else{var S=d?-o:x-o,b=d?-o:_-o;return D==="pin"?b+=o:D==="arrow"&&(b-=o),ge(D,S,b,o*2,o*2)}return new Ke({shape:{cx:d?0:x,cy:d?0:_,r:o}})}function te(){var o=W(E);return o.style.fill=null,o.setStyle(t.getModel("outline.itemStyle").getItemStyle()),o}function Se(){var o=W(s);o.setStyle(t.getModel("backgroundStyle").getItemStyle()),o.style.fill=null,o.z2=5;var d=W(s);d.setStyle(t.getModel("backgroundStyle").getItemStyle()),d.style.stroke=null;var c=new de;return c.add(o),c.add(d),c}function ae(o,d,c){var y=C?s[0]:s,g=C?u/2:s,h=l.getItemModel(o),L=h.getModel("itemStyle"),p=h.get("phase"),S=R(h.get("amplitude"),g*2),b=R(h.get("waveLength"),y*2),P=l.get("value",o),O=g-P*g*2;p=c?c.shape.phase:p==="auto"?o*Math.PI/4:p;var Y=L.getItemStyle();if(!Y.fill){var z=t.get("color"),X=o%z.length;Y.fill=z[X]}var Te=y*2,U=new ut({shape:{waveLength:b,radius:y,radiusY:g,cx:Te,cy:0,waterLevel:O,amplitude:S,phase:p,inverse:d},style:Y,x,y:_});U.shape._waterLevel=O;var ie=h.getModel("emphasis.itemStyle").getItemStyle();ie.lineWidth=0,U.ensureState("emphasis").style=ie,qe(U);var ne=W(s,!0);return ne.setStyle({fill:"white"}),U.setClipPath(ne),U}function re(o,d,c){var y=l.getItemModel(o),g=y.get("period"),h=y.get("direction"),L=l.get("value",o),p=y.get("phase");p=c?c.shape.phase:p==="auto"?o*Math.PI/4:p;var S=function(O){var Y=l.count();return Y===0?O:O*(.2+(Y-o)/Y*.8)},b=0;g==="auto"?b=S(5e3):b=typeof g=="function"?g(L,o):g;var P=0;h==="right"||h==null?P=Math.PI:h==="left"?P=-Math.PI:h==="none"?P=0:console.error("Illegal direction value for liquid fill."),h!=="none"&&y.get("waveAnimation")&&d.animate("shape",!0).when(0,{phase:p}).when(b/2,{phase:P+p}).when(b,{phase:P*2+p}).during(function(){G&&G.dirty(!0)}).start()}function Pe(o){var d=n.getModel("label");function c(){var Y=t.getFormattedLabel(0,"normal"),z=l.get("value",0)*100,X=l.getName(0)||t.name;return isNaN(z)||(X=z.toFixed(0)+"%"),Y??X}var y={z2:10,shape:{x:xe,y:Me,width:(C?s[0]:s)*2,height:(C?s[1]:s)*2},style:{fill:"transparent"},textConfig:{position:d.get("position")||"inside"},silent:!0},g={style:{text:c(),textAlign:d.get("align"),textVerticalAlign:d.get("baseline")}};Object.assign(g.style,Ze(d));var h=new ce(y),L=new ce(y);L.disableLabelAnimation=!0,h.disableLabelAnimation=!0;var p=new fe(g),S=new fe(g);h.setTextContent(p),L.setTextContent(S);var b=d.get("insideColor");S.style.fill=b;var P=new de;P.add(h),P.add(L);var O=W(s,!0);return G=new je({shape:{paths:o},x,y:_}),G.setClipPath(O),L.setClipPath(G),P}},dispose:function(){}});
