import{d as O,r as c,f as _,c as p,g as o,a as T,w as A,i as l,u as a,k as R,l as h,b as P,F as V,h as D,v as w,j as d,t as y,n as F,C as U,e as f,_ as $}from"./index-Xk2BpQ5Q.js";import{f as B,a as I,d as L,e as M,g as z,h as H,i as Q,j as W,k as X}from"./index-DunFZlf5.js";const q={class:"container"},G={class:"align-center flex justify-between border-b border-[#e5e7eb] bg-[#f9fafb] p-4"},K={class:"relative min-h-0 flex-1"},Y={key:0,class:"absolute bottom-0 left-0 flex w-full items-center gap-2 bg-red-200 p-2 text-base text-red-400"},Z={class:"grid flex-shrink-0 grid-flow-row gap-4 border-t border-[#e5e7eb] bg-[#f9fafb] p-4"},ee={class:"flex h-10 w-full gap-4"},te={class:"flex h-10 w-full gap-4"},oe={class:"flex h-10 w-full gap-4"},ne={key:1,class:"flex min-h-[75vh] flex-col items-center justify-center gap-4 text-gray-400"},se=O({__name:"PreviewerView",setup(re){const u=c(null),g=c(!1),r=c(""),s=c(""),m=c(),b=c(),v=c(""),k=_(()=>r.value?Math.max(1,r.value.split(`
`).length):1);function x(){g.value=!g.value}function C(){m.value&&b.value&&(b.value.scrollTop=m.value.scrollTop)}async function S(){if(!v.value.trim()){s.value="請輸入 API 端點";return}try{const e=await fetch(v.value);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();r.value=JSON.stringify(t,null,2),s.value=""}catch(e){console.error("Error fetching endpoint:",e),s.value=`載入失敗: ${e instanceof Error?e.message:String(e)}`}}async function j(){try{const e="/vue-echarts-workbench/",t=e?`${e}data/pages/demo-charts.json`:"data/pages/demo-charts.json",n=await fetch(t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();r.value=JSON.stringify(i,null,2),s.value=""}catch(e){console.error("Error fetching sample data:",e),s.value=`載入範例失敗: ${e instanceof Error?e.message:String(e)}`}}function E(){if(!r.value.trim()){s.value="沒有可下載的內容";return}try{const e=new Blob([r.value],{type:"application/json"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="chart-config.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}catch(e){console.error("Error downloading JSON:",e),s.value=`下載失敗: ${e instanceof Error?e.message:String(e)}`}}function N(){r.value=u.value?JSON.stringify(u.value,null,2):"",s.value=""}function J(){if(!r.value.trim()){s.value="請輸入 JSON 配置";return}try{const e=JSON.parse(r.value);u.value=null,setTimeout(()=>{u.value=e},0),s.value=""}catch(e){console.error("Error parsing JSON:",e),s.value=`JSON 格式錯誤: ${e instanceof Error?e.message:String(e)}`}}return(e,t)=>{const n=R("FontAwesomeIcon");return f(),p("div",q,[o("div",{class:F(["chart-settings popup-model",{active:g.value}]),onClick:x},[o("div",{class:"popup-content flex h-full flex-col",onClick:t[2]||(t[2]=A(()=>{},["stop"]))},[o("div",G,[t[3]||(t[3]=o("span",{class:"text-base font-bold text-[#44444e]"},"JSON 編輯器",-1)),o("button",{class:"text-[#44444e]",onClick:x},[l(n,{icon:a(B)},null,8,["icon"])])]),o("div",K,[o("div",{ref_key:"lineNumbersRef",ref:b,class:"absolute left-0 top-0 h-full overflow-hidden bg-gray-100 text-right text-base text-gray-500"},[(f(!0),p(V,null,D(k.value,i=>(f(),p("div",{key:i,class:"px-2"},y(i),1))),128))],512),h(o("textarea",{ref_key:"textareaRef",ref:m,class:"ml-14 h-full w-full resize-none bg-transparent p-0 text-base text-[#37353E] outline-none",placeholder:"在此編輯 ECharts 配置...","onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),onScroll:C,spellcheck:"false"},null,544),[[w,r.value]]),s.value?(f(),p("div",Y,[l(n,{icon:a(I)},null,8,["icon"]),d(" "+y(s.value),1)])):P("",!0)]),o("div",Z,[o("div",ee,[h(o("input",{class:"w-4/5 rounded border border-gray-300 px-3 py-2",type:"text",placeholder:"請輸入 API","onUpdate:modelValue":t[1]||(t[1]=i=>v.value=i)},null,512),[[w,v.value]]),o("button",{class:"flex h-10 w-1/5 items-center justify-center gap-2 rounded-md bg-[#59AC77] px-4 py-2 text-sm font-semibold text-white hover:bg-[#3A6F43]",onClick:S},[l(n,{icon:a(L)},null,8,["icon"]),t[4]||(t[4]=d("測試 ",-1))])]),o("div",te,[o("button",{class:"flex h-10 w-1/2 items-center justify-center gap-2 rounded-md bg-[#456882] px-4 py-2 text-sm font-semibold text-white hover:bg-[#234C6A]",onClick:j},[l(n,{icon:a(M)},null,8,["icon"]),t[5]||(t[5]=d("載入範例 ",-1))]),o("button",{class:"flex h-10 w-1/2 items-center justify-center gap-2 rounded-md bg-[#456882] px-4 py-2 text-sm font-semibold text-white hover:bg-[#234C6A]",onClick:E},[l(n,{icon:a(z)},null,8,["icon"]),t[6]||(t[6]=d("下載 JSON ",-1))])]),o("div",oe,[o("button",{class:"flex h-10 w-1/2 items-center justify-center gap-2 rounded-md bg-gray-500 px-4 py-2 text-sm font-semibold text-white hover:bg-gray-600",onClick:N},[l(n,{icon:a(H)},null,8,["icon"]),t[7]||(t[7]=d("重製 ",-1))]),o("button",{class:"flex h-10 w-1/2 items-center justify-center gap-2 rounded-md bg-[#456882] px-4 py-2 text-sm font-semibold text-white hover:bg-[#234C6A]",onClick:J},[l(n,{icon:a(Q)},null,8,["icon"]),t[8]||(t[8]=d("套用 ",-1))])])])])],2),u.value?(f(),T(a(U),{key:0,config:u.value},null,8,["config"])):(f(),p("div",ne,[l(n,{icon:a(W),class:"text-6xl"},null,8,["icon"]),t[9]||(t[9]=o("p",{class:"text-2xl font-bold"},"尚未載入任何配置",-1)),t[10]||(t[10]=o("p",{class:"text-lg"},"請點擊右下角的設定按鈕載入 JSON 配置",-1))])),o("button",{class:"chart-options-btn",onClick:x},[l(n,{icon:a(X)},null,8,["icon"])])])}}}),ie=$(se,[["__scopeId","data-v-e55e791b"]]);export{ie as default};
